#!/bin/busybox sh

error() {
    echo $1
    while true
    do
        /bin/sh
    done
}

dowipe() {
    wipe.sh $1 $2 $pixie_root_size $pixie_swap_size || error "Wipe failed!"
}

/bin/busybox mkdir -p /sys /proc /run /tmp /sbin /mnt
/bin/busybox --install -s

mount -t devtmpfs none /dev
mkdir /dev/pts
mount -t devpts none /dev/pts
mount -t sysfs none /sys
mount -t proc none /proc

. /share/common.sh

DRIVE=$(detect_drive)
DRIVEPP=$(get_partition_prefix $DRIVE)

[ -z "$pixie_wipe" ] || dowipe $pixie_wipe $DRIVE

fdisk -l $DRIVE

exec /bin/sh
